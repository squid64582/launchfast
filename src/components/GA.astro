---
const { TRACKING_ID } = Astro.props
---

{
  /*

  A component that can be used anywhere in your app
  Add this to the bottom of the page if you want to use it globally

  Use anywhere in your app like the following:

  <GA
    TRACKING_ID="GA-ID-12345678"
  />

  */
}

<script define:vars={{ TRACKING_ID }}>
  function gtag() {
    dataLayer.push(arguments)
  }
  if (TRACKING_ID && TRACKING_ID.length > 1) {
    const gaScript = document.createElement('script')
    gaScript.src = `https://www.googletagmanager.com/gtag/js?id=${TRACKING_ID}`
    gaScript.onload = () => {
      window.dataLayer = window.dataLayer || []
      gtag('js', new Date())
      gtag('config', TRACKING_ID)
    }
    document.head.appendChild(gaScript)
  }
</script>
